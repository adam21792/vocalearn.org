<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Example Sentences â€” Vocabulary App</title>

  <!-- Bootstrap (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

  <!-- Optional: keep your external CSS -->
  <link rel="stylesheet" href="style.css" />

  <style>
    /* Small local styles â€” move to style.css if you prefer */
    body { padding-top: 70px; background-color: #f8f9fa; }
    .custom-navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: .5rem 1rem;
      background-color: #007bff;
      color: #fff;
    }
    .navbar-toggle {
      display: none;
      font-size: 1.4rem;
      background: none;
      border: none;
      color: #fff;
    }
    .navbar-links {
      list-style: none;
      display: flex;
      gap: 1rem;
      margin: 0;
      padding: 0;
      align-items: center;
    }
    .navbar-links a { text-decoration: none; color: #fff; }
    .logo { height: 36px; width: auto; }

    @media (max-width: 768px) {
      .navbar-toggle { display: block; }
      .navbar-links { display: none; flex-direction: column; width: 100%; margin-top: .5rem; padding: .5rem 0; background: #0069d9; }
      .navbar-links.show { display: flex; }
      .navbar-links li { width: 100%; text-align: center; padding: .25rem 0; }
    }

    /* Example list visuals */
    #exampleList .list-group-item { display: flex; justify-content: space-between; align-items: flex-start; gap: .75rem; }
    .example-meta { color: #6c757d; font-size: .95rem; }
    .controls { display:flex; gap:.5rem; align-items:center; }
    .sr-only { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px,1px,1px,1px); white-space: nowrap; }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="custom-navbar" role="navigation" aria-label="Main navigation">
    <div class="d-flex align-items-center">
      <a href="./index.html" class="me-3" title="Home">
        <img src="./Logo.png" alt="Vocabulary App" class="logo">
      </a>
      <span class="h6 mb-0 text-white">Vocabulary App</span>
    </div>

    <div class="d-flex align-items-center">
      <button class="navbar-toggle" id="toggleBtn" aria-expanded="false" aria-controls="navbarLinks" aria-label="Toggle navigation">â˜°</button>

      <ul id="navbarLinks" class="navbar-links" role="menubar">
        <li role="none"><a role="menuitem" href="./index.html">Home</a></li>
        <li role="none"><a role="menuitem" href="./examples.html" aria-current="page">My Sentences</a></li>
        <li role="none"><a role="menuitem" href="#">Settings</a></li>
      </ul>
    </div>
  </nav>

  <!-- Content -->
  <main class="container">
    <div class="d-flex justify-content-between align-items-center mt-4">
      <h1 class="h3">ðŸ“˜ Example Sentences</h1>
      <div>
        <button id="clearAllBtn" class="btn btn-sm btn-outline-danger" type="button">Clear all</button>
      </div>
    </div>

    <div id="emptyState" class="mt-3">
      <p class="text-muted">No examples submitted yet.</p>
    </div>

    <div id="exampleList" class="list-group mt-1" aria-live="polite"></div>
  </main>

  <!-- Footer -->
  <footer class="container border-top py-3 my-4">
    <div class="d-flex flex-wrap justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <span class="text-body-secondary">Â© 2025 FurTech</span>
      </div>

      <ul class="nav list-unstyled d-flex">
        <li class="ms-3">
          <a class="text-body-secondary" href="https://wa.me/+201026645049" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
            WhatsApp
          </a>
        </li>
        <li class="ms-3">
          <a class="text-body-secondary" href="https://www.facebook.com/adamharoons92/" target="_blank" rel="noopener noreferrer" aria-label="Facebook">Facebook</a>
        </li>
      </ul>
    </div>
  </footer>

  <!-- Inline script (move to script.js if you prefer) -->
  <script>
    (function () {
      'use strict';

      // Elements
      const toggleBtn = document.getElementById('toggleBtn');
      const navbarLinks = document.getElementById('navbarLinks');
      const exampleList = document.getElementById('exampleList');
      const emptyState = document.getElementById('emptyState');
      const clearAllBtn = document.getElementById('clearAllBtn');

      // Navbar toggle (accessible)
      toggleBtn.addEventListener('click', () => {
        const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
        toggleBtn.setAttribute('aria-expanded', String(!expanded));
        navbarLinks.classList.toggle('show');
      });

      // Safe data retrieval from localStorage
      const loadExamples = () => {
        try {
          const raw = localStorage.getItem('sentences');
          return Array.isArray(JSON.parse(raw || '[]')) ? JSON.parse(raw || '[]') : [];
        } catch (e) {
          console.error('Failed to parse localStorage sentences:', e);
          return [];
        }
      };

      // Save examples (helper)
      const saveExamples = (arr) => {
        localStorage.setItem('sentences', JSON.stringify(arr));
      };

      // Render list safely: use textContent to avoid XSS
      const renderExamples = () => {
        exampleList.innerHTML = '';
        const data = loadExamples();

        if (!data || data.length === 0) {
          emptyState.style.display = '';
          clearAllBtn.disabled = true;
          return;
        }
        emptyState.style.display = 'none';
        clearAllBtn.disabled = false;

        data.forEach((item, idx) => {
          const wrapper = document.createElement('div');
          wrapper.className = 'list-group-item';

          // Left: content
          const left = document.createElement('div');
          left.style.flex = '1';

          const title = document.createElement('div');
          title.innerHTML = `<strong></strong>`; // placeholder for layout
          // Set text safely
          const strong = title.querySelector('strong');
          strong.textContent = item.word || '(no word)';

          const sentenceP = document.createElement('div');
          sentenceP.className = 'example-meta';
          sentenceP.textContent = item.sentence || '';

          left.appendChild(title);
          left.appendChild(sentenceP);

          // Right: controls
          const controls = document.createElement('div');
          controls.className = 'controls';

          // Copy button (copies sentence)
          const copyBtn = document.createElement('button');
          copyBtn.type = 'button';
          copyBtn.className = 'btn btn-sm btn-outline-secondary';
          copyBtn.title = 'Copy sentence';
          copyBtn.setAttribute('aria-label', 'Copy sentence');
          copyBtn.textContent = 'Copy';
          copyBtn.addEventListener('click', async () => {
            try {
              await navigator.clipboard.writeText(item.sentence || '');
              copyBtn.textContent = 'Copied';
              setTimeout(() => (copyBtn.textContent = 'Copy'), 1200);
            } catch (err) {
              console.error('Copy failed', err);
            }
          });

          // Delete button
          const delBtn = document.createElement('button');
          delBtn.type = 'button';
          delBtn.className = 'btn btn-sm btn-outline-danger';
          delBtn.title = 'Delete example';
          delBtn.setAttribute('aria-label', 'Delete example');
          delBtn.textContent = 'Delete';
          delBtn.addEventListener('click', () => {
            const arr = loadExamples();
            arr.splice(idx, 1);
            saveExamples(arr);
            renderExamples();
          });

          controls.appendChild(copyBtn);
          controls.appendChild(delBtn);

          wrapper.appendChild(left);
          wrapper.appendChild(controls);
          exampleList.appendChild(wrapper);
        });
      };

      // Clear all handler with confirmation
      clearAllBtn.addEventListener('click', () => {
        if (!confirm('Clear all saved sentences? This cannot be undone.')) return;
        localStorage.removeItem('sentences');
        renderExamples();
      });

      // Initialize
      renderExamples();

      // Accessibility: close nav if click outside on mobile
      document.addEventListener('click', (e) => {
        if (!navbarLinks.classList.contains('show')) return;
        const target = e.target;
        if (!navbarLinks.contains(target) && target !== toggleBtn) {
          navbarLinks.classList.remove('show');
          toggleBtn.setAttribute('aria-expanded', 'false');
        }
      });
    })();
  </script>

  <!-- Bootstrap JS (optional) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
